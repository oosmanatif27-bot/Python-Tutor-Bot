import os
import telebot
from telebot import types
import threading
import http.server
import socketserver

TOKEN = os.getenv("TELEGRAM_TOKEN")
bot = telebot.TeleBot(TOKEN)

# --- ุงููููุฌ ุงูุชุนูููู ุงููุงูู ุงูุดุงูู (8 ุฏุฑูุณ) ---

curriculum = {
    "1": (
        "๐ **ุงูุฏุฑุณ 1: ุฏุงูุฉ ุงูุทุจุงุนุฉ (print) - ูุณููุฉ ุงูุฅุฎุฑุงุฌ**\n\n"
        "**ูุด ูู ุงูู Printุ**\n"
        "ูู ุงูุฏุงูุฉ ุงููู ุชุณูุญ ููุจุฑูุงูุฌ ุจุฅุฎุฑุงุฌ ุงููุชุงุฆุฌ ูู. ุฃู ุดูุก ุฏุงุฎู ุงูููุณูู `()` ูุฎุฑุฌ ุนูู ุงูุดุงุดุฉ.\n\n"
        "**ููุงุท ุฌููุฑูุฉ:**\n"
        "1๏ธโฃ **ุทุจุงุนุฉ ุงููุตูุต (Strings):** ูุงุฒู ุชุณุชุฎุฏู ุนูุงูุงุช ุงูุชูุตูุต `\" \"` ุฃู `' '`. ููุดุ ุนุดุงู ุจุงูุซูู ุชุนุฑู ุฃู ูุฐุง 'ูุต' ูู ุงุณู ูุชุบูุฑ.\n"
        "   - ูุซุงู: `print(\"Welcome to Bot Empire\")` -> ูุทุจุน ุงููุต.\n"
        "2๏ธโฃ **ุทุจุงุนุฉ ุงูุฃุฑูุงู:** ูุง ุชุญุชุงุฌ ุนูุงูุงุช ุชูุตูุต. ูู ูุถุนุชูุง ุจูุนุงูููุง ูุฃููุง ุตูุฑุฉ ูุตูุฉ ูู ุฑูู ุญุณุงุจู.\n"
        "   - ูุซุงู: `print(500)` -> ูุทุจุน ุงูุฑูู.\n"
        "3๏ธโฃ **ุงูุฏูุฌ:** ุชูุฏุฑ ุชุทุจุน ูุต ูุฑูู ูุน ุจุนุถ ุจุงุณุชุฎุฏุงู ุงููุงุตูุฉ `,`.\n"
        "   - ูุซุงู: `print(\"Level:\", 1)` -> ูุทุจุน Level: 1\n\n"
        "ุฃุฑุณู **'ุงูุฏุฑุณ 2'** ููุงูุชูุงู ููุตูุงุฏูู."
    ),
    "2": (
        "๐ **ุงูุฏุฑุณ 2: ุงููุชุบูุฑุงุช ูุฃููุงุน ุงูุจูุงูุงุช (Variables & Types)**\n\n"
        "**ูุด ูู ุงููุชุบูุฑุ**\n"
        "ุชุฎูู ุงูุฐุงูุฑุฉ ูุฃููุง ูุฎุฒูุ ุงููุชุบูุฑ ูู 'ุตูุฏูู' ุชุนุทู ูู ุงุณู ูุชุฎุฒู ููู ูููุฉ ุนุดุงู ุชุฑุฌุน ููุง ุจุนุฏูู ุจุฏู ูุง ุชูุชุจูุง ูู ุดูู.\n\n"
        "**ุงูุฃููุงุน ุงููู ูุงุฒู ุชุนุฑููุง:**\n"
        "1๏ธโฃ **Str (ูุต):** ุฃู ููุงู ุจูู ุนูุงูุงุช ุชูุตูุต. `name = \"NENO\"`\n"
        "2๏ธโฃ **Int (ุฑูู ุตุญูุญ):** ุฃุฑูุงู ุจุฏูู ููุงุตู. `age = 20`\n"
        "3๏ธโฃ **Float (ุฑูู ุนุดุฑู):** ุฃุฑูุงู ุจูุงุตูุฉ. `score = 99.5` \n"
        "4๏ธโฃ **Bool (ููุทูู):** ูููุชูู ููุท `True` (ุตุญ) ุฃู `False` (ุฎุทุฃ).\n\n"
        "**ูุซุงู ุฌุงูุน:**\n"
        "```python\n"
        "points = 10\n"
        "print(\"Your points:\", points)\n"
        "```\n"
        "ุฃุฑุณู **'ุงูุฏุฑุณ 3'** ูููุธู ุจูุงูุงุชูุง."
    ),
    "3": (
        "๐ **ุงูุฏุฑุณ 3: ููุงูู ุงูุจูุงูุงุช (Data Structures)**\n\n"
        "ุจุนุฏ ูุง ุนุฑููุง ูุฎุฒู ูููุฉ ูุญุฏุฉุ ููู ูุฎุฒู 'ูุงุฆูุฉ' ูุงููุฉุ\n\n"
        "1๏ธโฃ **ุงูููุงุฆู (Lists):** ุชุณุชุฎุฏู ูุชุฎุฒูู ุนูุงุตุฑ ูุซูุฑุฉ ูู ููุงู ูุงุญุฏ ุจุงุณุชุฎุฏุงู `[]`.\n"
        "   - ูุซุงู: `tools = [\"Nmap\", \"SQLMap\"]` \n"
        "   - ุงููุตูู ููุนูุงุตุฑ: ุฃูู ุนูุตุฑ ุฑููู 0 ุฏุงุฆูุงู! `print(tools[0])` ูุทุจุน Nmap.\n\n"
        "2๏ธโฃ **ุงูููุงููุณ (Dictionaries):** ุชุณุชุฎุฏู ูุชุฎุฒูู ุงูุจูุงูุงุช ุจูุธุงู (ููุชุงุญ ููููุฉ) ุจุงุณุชุฎุฏุงู `{}`.\n"
        "   - ูุซุงู: `user = {\"name\": \"Hacker\", \"id\": 707}`\n"
        "   - ูู ุชุจู ุงูุงุณูุ ุชูุชุจ: `print(user[\"name\"])`.\n\n"
        "ุฃุฑุณู **'ุงูุฏุฑุณ 4'** ุนุดุงู ุชุฎูู ุจุฑูุงูุฌู ุฐูู."
    ),
    "4": (
        "๐ **ุงูุฏุฑุณ 4: ุงูุฌูู ุงูุดุฑุทูุฉ (If Statements)**\n\n"
        "ููุง ูุจุฏุฃ ุงูุจุฑูุงูุฌ 'ูููุฑ' ููุชุฎุฐ ูุฑุงุฑุงุช ุจูุงุกู ุนูู ุดุฑูุท ูุนููุฉ.\n\n"
        "**ููู ูุณุชุฎุฏููุงุ**\n"
        "- `if`: ุชุนูู 'ุฅุฐุง ุชุญูู ุงูุดุฑุท'.\n"
        "- `elif`: ุชุนูู 'ุฃู ุฅุฐุง ุชุญูู ุดุฑุท ุขุฎุฑ'.\n"
        "- `else`: ุชุนูู 'ุฅุฐุง ูู ูุชุญูู ุฃู ููุง ุณุจู'.\n\n"
        "**ูุซุงู ูุงูุนู (ูุธุงู ุฏุฎูู):**\n"
        "```python\n"
        "password = \"NENO.com\"\n"
        "if password == \"NENO.com\":\n"
        "    print(\"Welcome Boss!\")\n"
        "else:\n"
        "    print(\"Wrong Password!\")\n"
        "```\n"
        "โ๏ธ **ููุทุฉ ูููุฉ:** ูุงุญุธ ุงููุณุงูุฉ (Indentation) ูุจู ุงูู printุ ุจุงูุซูู ุชุนุชูุฏ ุนูููุง ุนุดุงู ุชุนุฑู ุฃู ูุฐุง ุงูุณุทุฑ ุชุงุจุน ููุดุฑุท.\n\n"
        "ุฃุฑุณู **'ุงูุฏุฑุณ 5'** ุนุดุงู ูุชุนูู ุงูุชูุฑุงุฑ."
    ),
    "5": (
        "๐ **ุงูุฏุฑุณ 5: ุงูุญููุงุช ุงูุชูุฑุงุฑูุฉ (Loops)**\n\n"
        "ุจุฏู ูุง ุชูุฑุฑ ูุชุงุจุฉ ุงูููุฏ 100 ูุฑุฉุ ุงูู Loop ูุณูููุง ุนูู ูู ุณุทุฑูู!\n\n"
        "1๏ธโฃ **For Loop:** ุชุณุชุฎุฏููุง ููุง ุชุนุฑู ุนุฏุฏ ุงููุฑุงุช ุฃู ุชุจู ุชูุฑ ุนูู ูุงุฆูุฉ.\n"
        "   - ูุซุงู: `for i in range(3): print(\"Hello\")` ูุทุจุน Hello ุซูุงุซ ูุฑุงุช.\n\n"
        "2๏ธโฃ **While Loop:** ุชุณุชุฎุฏููุง ููุง ุชุจู ุงูููุฏ ููุฑุฑ ููุณู 'ุทุงููุง' ุงูุดุฑุท ุตุญูุญ.\n"
        "   - ูุซุงู:\n"
        "   ```python\n"
        "   count = 1\n"
        "   while count <= 3:\n"
        "       print(\"Counting...\")\n"
        "       count += 1\n"
        "   ```\n"
        "ุฃุฑุณู **'ุงูุฏุฑุณ 6'** ููุชุนูู ููู ูุฎุชุตุฑ ุงูุฃููุงุฏ."
    ),
    "6": (
        "๐ **ุงูุฏุฑุณ 6: ุงูุฏูุงู (Functions)**\n\n"
        "ุงูุฏุงูุฉ ูู ููุฏ ุฌุงูุฒ ุชุนุทูู ุงุณูุ ูุชุณุชุฏุนูู ููุช ูุง ุชุญุชุงุฌู ุจุฏู ูุง ุชุนูุฏ ูุชุงุจุชู ูู ุดูู. ูุจุฏุฃูุง: 'ุงูุชุจ ูุฑุฉุ ูุงุณุชุฎุฏู ุฏุงุฆูุงู'.\n\n"
        "**ููู ูุตูุน ุฏุงูุฉุ**\n"
        "ูุณุชุฎุฏู ูููุฉ `def` ุจุนุฏูุง ุงุณู ุงูุฏุงูุฉ.\n\n"
        "**ูุซุงู:**\n"
        "```python\n"
        "def start_bot():\n"
        "    print(\"Bot Empire is Ready!\")\n"
        "\n"
        "start_bot() # ููุง ุงุณุชุฏุนููุงูุง ูุดุบููุงูุง\n"
        "```\n"
        "ุงูุฏูุงู ูู ุงููู ุชุฎูู ููุฏู ูุฑุชุจ ูุงุญุชุฑุงูู.\n\n"
        "ุฃุฑุณู **'ุงูุฏุฑุณ 7'** ููุชุนุงูู ูุน ุงููููุงุช."
    ),
    "7": (
        "๐ **ุงูุฏุฑุณ 7: ุงูุชุนุงูู ูุน ุงููููุงุช (File I/O)**\n\n"
        "ููู ุชุฎูู ุจุฑูุงูุฌู ูุญูุธ ุจูุงูุงุชู ูู ููู ุฎุงุฑุฌู ุฃู ููุฑุฃ ูููุ\n\n"
        "1๏ธโฃ **ุงููุชุงุจุฉ ูู ููู:**\n"
        "```python\n"
        "with open(\"data.txt\", \"w\") as file:\n"
        "    file.write(\"New Info\")\n"
        "```\n"
        "- `\"w\"` ุชุนูู Write (ูุณุญ ุงููุฏูู ููุชุงุจุฉ ุฌุฏูุฏ).\n"
        "- `\"a\"` ุชุนูู Append (ุฅุถุงูุฉ ูููุฏูู).\n\n"
        "2๏ธโฃ **ุงููุฑุงุกุฉ ูู ููู:**\n"
        "```python\n"
        "with open(\"data.txt\", \"r\") as file:\n"
        "    content = file.read()\n"
        "    print(content)\n"
        "```\n"
        "ุฃุฑุณู **'ุงูุฏุฑุณ 8'** ูููุตูู ููููุชุจุงุช ุงูุฌุงูุฒุฉ."
    ),
    "8": (
        "๐ **ุงูุฏุฑุณ 8: ุงูููุชุจุงุช ูุงููุญุฏุงุช (Modules & Packages)**\n\n"
        "ูู ุจุงูุซููุ ูู ูุงุฒู ุชุณูู ูู ุดูุก ุจููุณู. ููู ูุจุฑูุฌูู ุณููุง ุฃููุงุฏ ุฌุงูุฒุฉ (ููุชุจุงุช) ุฃูุช ุจุณ ุชุณุชุฎุฏููุง ุจูููุฉ `import`.\n\n"
        "**ุฃูุซูุฉ ุดููุฑุฉ:**\n"
        "- `import os`: ููุชุญูู ูู ูููุงุช ุงููุธุงู.\n"
        "- `import random`: ูุชูููุฏ ุฃุฑูุงู ุนุดูุงุฆูุฉ.\n"
        "- `import time`: ููุชุญูู ูู ุงูููุช.\n\n"
        "**ูุซุงู:**\n"
        "```python\n"
        "import random\n"
        "print(random.randint(1, 100)) # ูุทุจุน ุฑูู ุนุดูุงุฆู\n"
        "```\n"
        "ุจูุตููู ูููุงุ ุตุฑุช ููู ุจุฃุณุงุณูุงุช ุจุงูุซูู ูุงููุฉ! ุฃูุช ุงูุขู ุฌุงูุฒ ูุชุจุฏุฃ ูู ุงูุฃูู ุงูุณูุจุฑุงูู."
    )
}

# --- ูุธุงู ูุนุงูุฌุฉ ุงูุฑุณุงุฆู ---

@bot.message_handler(commands=['start'])
def welcome(message):
    markup = types.ReplyKeyboardMarkup(resize_keyboard=True, row_width=2)
    item1 = types.KeyboardButton("ููุฏูุฉ ุจุงูุซูู")
    item2 = types.KeyboardButton("ูุงุฆูุฉ ุงูุฏุฑูุณ")
    markup.add(item1, item2)
    
    welcome_msg = (
        "๐ ููุง ุจู ูุง ุจุทู ูู **Bot Empire**!\n\n"
        "ุฃูุง ูุฏุฑุจู ุงูุฎุงุตุ ุฑุงุญ ูุจุฏุฃ ุฑุญูุฉ ููุชุนุฉ ูุชุนูู ุงูุจุฑูุฌุฉ ูู ุงูุตูุฑ.\n"
        "ุงูุดุฑุญ ููุง ูุฃุฎูุฐ ูู ุฃูุถู ุงููุฑุงุฌุน ุงูุนุงูููุฉ ุจุฃุณููุจ ูุจุณุท.\n\n"
        "ุงุถุบุท ุนูู 'ููุฏูุฉ ุจุงูุซูู' ุนุดุงู ูุจุฏุฃ!"
    )
    bot.send_message(message.chat.id, welcome_msg, reply_markup=markup, parse_mode="Markdown")

@bot.message_handler(func=lambda message: True)
def handle_input(message):
    text = message.text
    
    if text == "ููุฏูุฉ ุจุงูุซูู":
        bot.send_message(message.chat.id, "ุชูุนุฏ ุจุงูุซูู (Python) ูุบุฉ ุจุฑูุฌุฉ ุนุงููุฉ ุงููุณุชููุ ููุณุฑุฉุ ููุชุนุฏุฏุฉ ุงูููุงุฐุฌุ ุชูุฑุถ ุณูุทุฑุชูุง ูุฃููู ุฃุฏุงุฉ ูู ุงูุนุงูู ุงูุจุฑูุฌู ุงูุญุฏูุซ ุจูุถู ุชูุงุฒููุง ุงููุฑูุฏ ุจูู ุงูุจุณุงุทุฉ ุงููุชูุงููุฉ ูุงูููุฉ ุงููููููุฉ. ุชุนุชูุฏ ุงููุบุฉ ูู ุฌููุฑูุง ุนูู ููุณูุฉ "ุณูููุฉ ุงููุฑุงุกุฉ" ุนุจุฑ ุงุณุชุฎุฏุงู ุงูุฅุฒุงุญุฉ (Indentation) ุจุฏูุงู ูู ุงูุฃููุงุณ ุงููุนูุฏุฉุ ููุง ูููู ุงูุฃุฎุทุงุก ุงูููุทููุฉ ููุณุฑุน ุนูููุฉ ุงูุชุทููุฑ. ูุชุชููุฒ ุจูุธุงู ููุน ุฏููุงูููู (Dynamic Typing) ูููุชุจุฉ ููุงุณูุฉ ุถุฎูุฉ ุชููุฑ ุญูููุงู ุฌุงูุฒุฉ ููู ุดูุก ุจุฏุกุงู ูู ุชุทููุฑ ุงูููุจ ูุงูุฐูุงุก ุงูุงุตุทูุงุนู ูุตููุงู ุฅูู ุงูุฃูู ุงูุณูุจุฑุงูู ูุฃุชูุชุฉ ุงูุงุฎุชุฑุงูุ ููุง ูุฌุนููุง ุงูุฎูุงุฑ ุงูุฃูู ูููุงูุฑุฒ ูุงููุจุฑูุฌูู ุงูุฐูู ููุถููู ุงูุชุฑููุฒ ุนูู "ุญู ุงููุดููุงุช" ุจุฏูุงู ูู ุงูุงูุดุบุงู ุจุชุนููุฏุงุช ุฅุฏุงุฑุฉ ุงูุฐุงูุฑุฉ ูุงูุนุชุงุฏ. ุฅููุง "ุงููุบุฉ ุงูุบุฑุงุก" ุงูุชู ุชุฑุจุท ุจูู ุงูุฃูุธูุฉ ุงููุฎุชููุฉ ุจููุงุกุฉ ุนุงููุฉุ ููุง ูุฌุนููุง ุงูุฑููุฒุฉ ุงูุฃุณุงุณูุฉ ูุฃู ูุดุฑูุน ุชููู ุถุฎู ุฃู ูุธุงู ุฃููู ูุชุทูุฑ.")
    
    elif text == "ูุงุฆูุฉ ุงูุฏุฑูุณ":
        msg = "ุงุฎุชุฑ ุงูุฏุฑุณ ุงููู ุชุจูู ูู 1 ุฅูู 8:"
        markup = types.ReplyKeyboardMarkup(resize_keyboard=True, row_width=4)
        btns = [types.KeyboardButton(f"ุงูุฏุฑุณ {i}") for i in range(1, 9)]
        markup.add(*btns)
        bot.send_message(message.chat.id, msg, reply_markup=markup)
        
    elif "ุงูุฏุฑุณ" in text:
        num = text.split()[-1]
        if num in curriculum:
            bot.send_message(message.chat.id, curriculum[num], parse_mode="Markdown")
        else:
            bot.send_message(message.chat.id, "ุฃุฑุณู 'ุงูุฏุฑุณ' ูุชุจูุนุงู ุจุฑููู (ูุซูุงู: ุงูุฏุฑุณ 1)")
    else:
        bot.send_message(message.chat.id, "ูุง ูููุช ูุตุฏูุ ุงุณุชุฎุฏู ุงูุฃุฒุฑุงุฑ!")

# --- ุณูุฑูุฑ ูุญุต ุงูุญุงูุฉ ูู Koyeb ---
def run_health_server():
    port = 8000
    handler = http.server.SimpleHTTPRequestHandler
    with socketserver.TCPServer(("", port), handler) as httpd:
        httpd.serve_forever()

threading.Thread(target=run_health_server, daemon=True).start()

if __name__ == "__main__":
    bot.remove_webhook()
    print("Bot Empire Educational System: LIVE")
    bot.infinity_polling()
bot.polling(non_stop=True, skip_pending=True)

